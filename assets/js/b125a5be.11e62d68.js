"use strict";(self.webpackChunkuc_2_docs=self.webpackChunkuc_2_docs||[]).push([[7871],{3905:(e,t,o)=>{o.d(t,{Zo:()=>p,kt:()=>m});var n=o(67294);function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function r(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)o=r[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var s=n.createContext({}),c=function(e){var t=n.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var o=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(o),m=i,d=u["".concat(s,".").concat(m)]||u[m]||h[m]||r;return o?n.createElement(d,a(a({ref:t},p),{},{components:o})):n.createElement(d,a({ref:t},p))}));function m(e,t){var o=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=o.length,a=new Array(r);a[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:i,a[1]=l;for(var c=2;c<r;c++)a[c]=o[c];return n.createElement.apply(null,a)}return n.createElement.apply(null,o)}u.displayName="MDXCreateElement"},90969:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var n=o(87462),i=(o(67294),o(3905));const r={},a=void 0,l={unversionedId:"Toolboxes/DiscoveryElectronics/automation_intro",id:"Toolboxes/DiscoveryElectronics/automation_intro",title:"automation_intro",description:"openUC2 Discovery Electronics Kit - Extended Tutorial",source:"@site/docs/01_Toolboxes/02_DiscoveryElectronics/01_automation_intro.md",sourceDirName:"01_Toolboxes/02_DiscoveryElectronics",slug:"/Toolboxes/DiscoveryElectronics/automation_intro",permalink:"/docs/Toolboxes/DiscoveryElectronics/automation_intro",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"core_intro",permalink:"/docs/Toolboxes/DiscoveryCore/SPANISH/core_intro"},next:{title:"openUC2 Camera Setup",permalink:"/docs/Toolboxes/DiscoveryElectronics/Camera Setup"}},s={},c=[{value:"openUC2 Discovery Electronics Kit - Extended Tutorial",id:"openuc2-discovery-electronics-kit---extended-tutorial",level:3},{value:"Introduction",id:"introduction",level:2},{value:"Applications",id:"applications",level:3},{value:"Components Included in the Kit:",id:"components-included-in-the-kit",level:2},{value:"In Cubes:",id:"in-cubes",level:3},{value:"Not in Cubes:",id:"not-in-cubes",level:3},{value:"Experiment #1: Testing the USB Serial Interface via the Web",id:"experiment-1-testing-the-usb-serial-interface-via-the-web",level:2},{value:"Step 1: Flashing the ESP32 Firmware",id:"step-1-flashing-the-esp32-firmware",level:3},{value:"Step 2: Connecting and Testing the Web Interface",id:"step-2-connecting-and-testing-the-web-interface",level:3},{value:"Step 3: Hardware Setup for Testing and controlling the Z-focus Motor",id:"step-3-hardware-setup-for-testing-and-controlling-the-z-focus-motor",level:3},{value:"Step 4: Controlling the LED Array",id:"step-4-controlling-the-led-array",level:3},{value:"Experiment #2: Building a Microscope and Controlling it with the PS4 Controller",id:"experiment-2-building-a-microscope-and-controlling-it-with-the-ps4-controller",level:3},{value:"Step 1: Pairing the PS4 Controller",id:"step-1-pairing-the-ps4-controller",level:3},{value:"How to Pair the PS4 Controller:",id:"how-to-pair-the-ps4-controller",level:4},{value:"Step 2: Building the Microscope",id:"step-2-building-the-microscope",level:3},{value:"Components Needed (in addition to the Smartphone micrsocope):",id:"components-needed-in-addition-to-the-smartphone-micrsocope",level:4},{value:"Step-by-Step Assembly:",id:"step-by-step-assembly",level:4},{value:"Step 3: Controlling the Microscope with the PS4 Controller",id:"step-3-controlling-the-microscope-with-the-ps4-controller",level:3},{value:"Video Tutorial",id:"video-tutorial",level:3},{value:"Experiment #3: Controlling the UC2 Electronics using ImSwitch",id:"experiment-3-controlling-the-uc2-electronics-using-imswitch",level:3},{value:"Step 1: Installing ImSwitch",id:"step-1-installing-imswitch",level:3},{value:"Method 1: Install ImSwitch via Python Package (with Napari support)",id:"method-1-install-imswitch-via-python-package-with-napari-support",level:4},{value:"Method 2: Running ImSwitch using Docker",id:"method-2-running-imswitch-using-docker",level:4},{value:"Step 2: Using the ImSwitch Config File",id:"step-2-using-the-imswitch-config-file",level:3},{value:"Step 3: Running the Microscope with ImSwitch",id:"step-3-running-the-microscope-with-imswitch",level:3},{value:"Video Tutorial",id:"video-tutorial-1",level:3},{value:"Further Experiments (coming soon)",id:"further-experiments-coming-soon",level:2},{value:"Experiment (OLD)",id:"experiment-old",level:2},{value:"Microscope Assembly:",id:"microscope-assembly",level:3},{value:"Instructional Videos:",id:"instructional-videos",level:3},{value:"Microscope Control:",id:"microscope-control",level:3},{value:"Web-Serial Interface:",id:"web-serial-interface",level:3},{value:"Getting a Sharp Image:",id:"getting-a-sharp-image",level:3}],p={toc:c};function h(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h3",{id:"openuc2-discovery-electronics-kit---extended-tutorial"},"openUC2 Discovery Electronics Kit - Extended Tutorial"),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,"The openUC2 Discovery Electronics Kit empowers users to explore advanced microscopy techniques by combining geometric optics and automation. By utilizing affordable, modular components, this kit allows you to build a fully functioning digital microscope with smart features such as automated focus stacking and digital phase contrast. It\u2019s an ideal learning tool for educators, students, and hobbyists interested in microscopy, optics, and electronics."),(0,i.kt)("p",null,(0,i.kt)("img",{src:o(34557).Z,width:"4032",height:"3024"}),"\n",(0,i.kt)("em",{parentName:"p"},"Electronics components to have a lot of fun with open-source fully automated microscopy")," "),(0,i.kt)("p",null,"This tutorial will guide you through building and operating a motorized microscope. By the end of this experiment, you\u2019ll understand how to control a motorized Z-stage for precise focusing, use an LED array for illumination, and experiment with digital contrast methods."),(0,i.kt)("h3",{id:"applications"},"Applications"),(0,i.kt)("p",null,"This kit is perfect for classrooms or workshops where participants learn how to build and program optical systems. With the added automation, it\u2019s also useful for research projects needing consistent imaging over time or where manual focus and lighting adjustments are too cumbersome. This could include biology labs, maker spaces, or environments that foster innovation in digital imaging."),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"components-included-in-the-kit"},"Components Included in the Kit:"),(0,i.kt)("h3",{id:"in-cubes"},"In Cubes:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Camera")," (USB3, monochrome)"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Motorized Z-Stage")," (NEMA 11 stepper motor)"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"openUC2 LED Array")," (3 concentric circles with NeoPixels)"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Baseplates")," (10x for modular setup)")),(0,i.kt)("h3",{id:"not-in-cubes"},"Not in Cubes:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Objective Lens")," (RMS compatible, 10x finite or 4x finite)"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"openUC2 Electronic Board")," (ESP32-based control unit)"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Box + Foam Insert")," (for safe storage and transport)"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Micro USB Cable")," (for connecting ESP32)"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Controller")," (PlayStation-style)"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"12V Power Supply")," (to power motors and lights)")),(0,i.kt)("hr",null),(0,i.kt)("h2",{id:"experiment-1-testing-the-usb-serial-interface-via-the-web"},"Experiment #1: Testing the USB Serial Interface via the Web"),(0,i.kt)("p",null,"In this first experiment, we\u2019ll walk through how to control the motorized Z-stage and LED array using the web-based serial interface."),(0,i.kt)("h3",{id:"step-1-flashing-the-esp32-firmware"},"Step 1: Flashing the ESP32 Firmware"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Before proceeding, ensure your ESP32 board has the latest firmware. You can download and flash the firmware via the official ",(0,i.kt)("a",{parentName:"li",href:"https://youseetoo.github.io/"},"openUC2 website"),", selecting the appropriate version (currently v3 Standalone).")),(0,i.kt)("p",null,(0,i.kt)("img",{src:o(13295).Z,width:"3124",height:"2112"}),"\n",(0,i.kt)("em",{parentName:"p"},"Choose the ESP32 v3 board (not BETA or re-work!) and flash it (but only if you need an update)")),(0,i.kt)("p",null,"The source-code can be found ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/youseetoo/uc2-esp32"},"here")),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},"Connect the ESP32 to your computer using the micro-USB cable.")),(0,i.kt)("p",null,(0,i.kt)("img",{src:o(55415).Z,width:"3124",height:"2112"})),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},'In your Chrome browser and click on "Connect." A dialog will prompt you to select the COM port for your ESP32, which should show as ',(0,i.kt)("inlineCode",{parentName:"li"},"CP 20x"),'. Once connected, you can install the latest firmware by simply clicking the "Install" button. If nothing shows up, you can install the drivers from the following propmpt that results when you hit anywhere on the screen:')),(0,i.kt)("p",null,(0,i.kt)("img",{src:o(10830).Z,width:"3124",height:"2112"})),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Wait until the firmware has been flashed successfully.")),(0,i.kt)("h3",{id:"step-2-connecting-and-testing-the-web-interface"},"Step 2: Connecting and Testing the Web Interface"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"After flashing the firmware, go to the testing section on the same website. You\u2019ll find buttons to control the motor and LEDs (This can be tested with the hardware connected or with only the ESP32 connected via USB)")),(0,i.kt)("p",null,(0,i.kt)("img",{src:o(38025).Z,width:"3124",height:"2112"})),(0,i.kt)("ol",{start:2},(0,i.kt)("li",{parentName:"ol"},'Connect to your ESP32 board using the "Connect" button again, ensuring the correct COM port is selected.')),(0,i.kt)("p",null,(0,i.kt)("img",{src:o(49758).Z,width:"3124",height:"2112"})),(0,i.kt)("ol",{start:3},(0,i.kt)("li",{parentName:"ol"},"Once connected, test the system by sending a simple command:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{"task":"/motor_act", "motor": { "steppers": [ { "stepperid": 3, "position": -1000, "speed": 1000, "isabs": 0, "isaccel": 0} ] } }\n')),(0,i.kt)("p",null,"This command will move the Z-axis motor by -1000 steps (1 full rotation) at a speed of 1000 steps per second. Each step corresponds to a movement of 300nm when using microstepping. You\u2019ll see the motor rotate, adjusting the focus."),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Note:")," Ensure the command string has no line breaks.")),(0,i.kt)("h3",{id:"step-3-hardware-setup-for-testing-and-controlling-the-z-focus-motor"},"Step 3: Hardware Setup for Testing and controlling the Z-focus Motor"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Plug the ESP32 board into your computer via USB."),(0,i.kt)("li",{parentName:"ol"},"Connect the 12V power supply to the provided port."),(0,i.kt)("li",{parentName:"ol"},"Attach the NEMA 11 motor to the Z-motor port on the board."),(0,i.kt)("li",{parentName:"ol"},"Turn on the system and verify that the motor responds to commands."),(0,i.kt)("li",{parentName:"ol"},"The motor should move when you enter the command or hit the buttons. ")),(0,i.kt)("p",null,(0,i.kt)("img",{src:o(50895).Z,width:"4032",height:"3024"})),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"[VIDEO:]"," Connect Motor:")),(0,i.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/TsWAeWl2T10?si=Z3GzSg2Xhjy6u3jf",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),(0,i.kt)("h3",{id:"step-4-controlling-the-led-array"},"Step 4: Controlling the LED Array"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Use the web interface to turn the LEDs on and off or control brightness."),(0,i.kt)("li",{parentName:"ol"},"Try adjusting the LED patterns (e.g., lighting only certain rings) using the available commands. This turns a ll red. Try to turn on individual LEDs. For this checkout the Documentation to the Command set/API ",(0,i.kt)("a",{parentName:"li",href:"https://openuc2.github.io/docs/Electronics/UC2-ESP/APIDescription/INTRO"},"here"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{"task":"/ledarr_act", "led":{"LEDArrMode":1, "led_array":[{"id":0, "r":0, "g":50, "b":0}]}}\n\n')),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"text",src:o(75825).Z,width:"4032",height:"3024"})),(0,i.kt)("p",null,"Experiment with other colors by changing the RGB values."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"[VIDEO:]"," Connect LED:")),(0,i.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/l8rRLvF6X6g?si=w-AXCYUHzXj2p1m5",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),(0,i.kt)("p",null,"This first exercise gives you a solid introduction to controlling basic components of the openUC2 system. In future tutorials, we will explore more advanced techniques, such as automated focus stacking and digital phase-contrast imaging -> for this you can have a look here  ",(0,i.kt)("a",{parentName:"p",href:"https://openuc2.github.io/docs/Toolboxes/DiscoveryPhaseMicroscopy/DPCmicroscopy"},"https://openuc2.github.io/docs/Toolboxes/DiscoveryPhaseMicroscopy/DPCmicroscopy")),(0,i.kt)("p",null,"Feel free to experiment further with different motor and LED settings to familiarize yourself with the control interface. If you have question reach out to us in our forum: openuc2.discourse.group."),(0,i.kt)("h3",{id:"experiment-2-building-a-microscope-and-controlling-it-with-the-ps4-controller"},"Experiment #2: Building a Microscope and Controlling it with the PS4 Controller"),(0,i.kt)("p",null,"In this experiment, you will build a digital microscope using the components from the openUC2 Discovery Kit and learn how to control the microscope\u2019s motorized stage and LED array using a PS4 controller. This setup allows for intuitive control, perfect for navigating a sample on the XY stage or adjusting focus."),(0,i.kt)("h3",{id:"step-1-pairing-the-ps4-controller"},"Step 1: Pairing the PS4 Controller"),(0,i.kt)("p",null,"The UC2-ESP firmware is designed to support various input devices, including the PS4 controller, making it easier to interact with the microscope. You\u2019ve already worked with USB Serial commands, but using the PS4 controller will give you a more flexible, hands-on approach."),(0,i.kt)("h4",{id:"how-to-pair-the-ps4-controller"},"How to Pair the PS4 Controller:"),(0,i.kt)("p",null,"For more detailed instructions on pairing, refer to the ",(0,i.kt)("a",{parentName:"p",href:"https://openuc2.github.io/docs/Electronics/PS4-Controller"},"UC2 PS4 Controller Pairing Guide"),". But briefly:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"First, put your PS4 controller into pairing mode by holding down the ",(0,i.kt)("strong",{parentName:"li"},"Share")," button and the ",(0,i.kt)("strong",{parentName:"li"},"PS button")," simultaneously until the light bar starts blinking."),(0,i.kt)("li",{parentName:"ol"},"Open the serial prompt in your browser (connected to the ESP32 board) or use the web interface."),(0,i.kt)("li",{parentName:"ol"},"Enter the command:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{"bt_scan":1}\n')),(0,i.kt)("p",null,"This will initiate the Bluetooth scan on the ESP32, which will detect and pair with the controller. Alternatively, you can use the ",(0,i.kt)("strong",{parentName:"p"},'"Pair Controller"')," button in the web interface."),(0,i.kt)("ol",{start:4},(0,i.kt)("li",{parentName:"ol"},"Once paired, you should be able to control the motorized stage using the analog sticks on the controller and switch the LED array on/off using the buttons.")),(0,i.kt)("h3",{id:"step-2-building-the-microscope"},"Step 2: Building the Microscope"),(0,i.kt)("p",null,"Next, you will build a motorized digital microscope using the components provided in the kit. This setup will be similar to the ",(0,i.kt)("strong",{parentName:"p"},"smartphone microscope"),", which can be found in detail ",(0,i.kt)("a",{parentName:"p",href:"https://openuc2.github.io/docs/Toolboxes/DiscoveryCore/ENGLISH/coreMicroscope#tutorial-smartphone-microscope"},"here"),", but with the added feature of a motorized Z-stage for fine-tuning the focus and the monocrhome USB-3 caemra"),(0,i.kt)("h4",{id:"components-needed-in-addition-to-the-smartphone-micrsocope"},"Components Needed (in addition to the Smartphone micrsocope):"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Objective Lens")," (RMS 10x or 4x)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Motorized Z-Stage")," (NEMA 11 stepper motor)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"LED Array")," (for illumination)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"ESP32 Electronics Board")," (with 12V power supply)"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"PS4 Controller"))),(0,i.kt)("h4",{id:"step-by-step-assembly"},"Step-by-Step Assembly:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Mount the Objective Lens"),": Attach the RMS-compatible objective to the lens holder on the Z-stage."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Assemble the Z-Stage"),": Attach the motorized Z-stage to the base plate and secure the camera above it using the provided baseplates and cubes."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Connect the Electronics"),": Plug in the ESP32 board, motorized stage, and LED array. Ensure the 12V power supply is connected to provide power to the motors and LEDs."),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Connect the Camera"),": Attach the camera to the UC2 setup and connect it to your computer for capturing images.")),(0,i.kt)("p",null,"For detailed assembly steps, refer to the ",(0,i.kt)("strong",{parentName:"p"},"smartphone microscope")," tutorial, which provides an in-depth guide to building the optical system."),(0,i.kt)("h3",{id:"step-3-controlling-the-microscope-with-the-ps4-controller"},"Step 3: Controlling the Microscope with the PS4 Controller"),(0,i.kt)("p",null,"Now that the microscope is built and the PS4 controller is paired, you can control the motorized Z-stage and LED array:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Move the Z-stage"),": Use the ",(0,i.kt)("strong",{parentName:"li"},"left analog stick")," to move the stage up and down (adjust focus)."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Control the LEDs"),": Use the ",(0,i.kt)("strong",{parentName:"li"},"controller buttons")," to turn the LED array on/off and cycle through different illumination patterns.")),(0,i.kt)("p",null,"This setup allows you to navigate through your sample and adjust focus without touching the hardware, which is particularly useful when working with sensitive samples or in teaching environments where ease of use is essential."),(0,i.kt)("h3",{id:"video-tutorial"},"Video Tutorial"),(0,i.kt)("p",null,"For a visual guide on how to set up the microscope and use the PS4 controller for control, watch the following video:"),(0,i.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/y06lRu2dsUk?si=hGGhUpTugzL1LZdK",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),(0,i.kt)("p",null,"This experiment provides a more interactive experience with your microscope, enabling smooth, hands-free control of the imaging process using a PS4 controller. You can continue to experiment with different settings, such as motor speeds and LED illumination patterns, to optimize your microscope for various samples."),(0,i.kt)("h3",{id:"experiment-3-controlling-the-uc2-electronics-using-imswitch"},"Experiment #3: Controlling the UC2 Electronics using ImSwitch"),(0,i.kt)("p",null,"In this experiment, you'll combine everything you've learned so far by controlling the UC2 system through ImSwitch, a powerful software interface designed for modular microscopy control. This tutorial provides a basic introduction to setting up ImSwitch, configuring your microscope components, and automating functions such as stage movement and LED control."),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"step-1-installing-imswitch"},"Step 1: Installing ImSwitch"),(0,i.kt)("p",null,"There are two ways to install ImSwitch, depending on your system preferences."),(0,i.kt)("h4",{id:"method-1-install-imswitch-via-python-package-with-napari-support"},"Method 1: Install ImSwitch via Python Package (with Napari support)"),(0,i.kt)("p",null,"A more detailed explantion can be found here: ",(0,i.kt)("a",{parentName:"p",href:"https://openuc2.discourse.group/t/imswitch-installation-on-mac-and-windows/37"},"https://openuc2.discourse.group/t/imswitch-installation-on-mac-and-windows/37")),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Set up your Python environment")," (using Conda or Mamba):"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"mamba create -n imswitchhackathon python=3.9 -y\nmamba activate imswitchhackathon\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Install ImSwitch"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pip install https://github.com/openUC2/ImSwitch/archive/refs/heads/master.zip # this installs the lastest master\n# do the same if you want to update the system\n# alternative: \ngit clone https://github.com/openUC2/ImSwitch/\ncd ImSwitch\npip install -e .\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Optional"),": Install the required dependencies for QT and Napari:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"pip install pyqtgraph qdarkstyle\n")))),(0,i.kt)("p",null,"This setup will allow you to run ImSwitch with full functionality, including graphical user interface (GUI) support for Napari."),(0,i.kt)("h4",{id:"method-2-running-imswitch-using-docker"},"Method 2: Running ImSwitch using Docker"),(0,i.kt)("p",null,"For a simpler, platform-agnostic solution, you can run ImSwitch using Docker:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Pull the Docker container"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo docker pull ghcr.io/openuc2/imswitch-noqt-x64:latest\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Run the Docker container"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"sudo docker run -it --rm -p 8001:8001 -p 2222:22 \\\n-e HEADLESS=1 \\\n-e HTTP_PORT=8001 \\\n-e CONFIG_FILE=example_uc2_hik_flowstop.json \\\n-e CONFIG_PATH=/config \\\n-v ~/Downloads:/config \\\n--privileged ghcr.io/openuc2/imswitch-noqt-x64:latest\n")))),(0,i.kt)("p",null,"Once you have ImSwitch installed and running, you can access the web interface at ",(0,i.kt)("inlineCode",{parentName:"p"},"localhost:8001")," to control the system."),(0,i.kt)("p",null,"For detailed instructions on Docker installation, visit the ",(0,i.kt)("a",{parentName:"p",href:"https://openuc2.github.io/docs/ImSwitch/ImSwitchDocker/"},"ImSwitch Docker Guide"),"."),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"step-2-using-the-imswitch-config-file"},"Step 2: Using the ImSwitch Config File"),(0,i.kt)("p",null,"Now that ImSwitch is installed, you need to configure it for your specific setup. Here is an example configuration file (",(0,i.kt)("inlineCode",{parentName:"p"},"uc2_hik_histo.json"),") for controlling the UC2 system:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "positioners": {\n    "ESP32Stage": {\n      "managerName": "ESP32StageManager",\n      "managerProperties": {\n        "rs232device": "ESP32",\n        "stepsizeX": -0.3125,\n        "stepsizeY": -0.3125,\n        "stepsizeZ": 0.3125,\n        "homeSpeedX": 15000,\n        "homeSpeedY": 15000,\n        "homeSpeedZ": 15000\n      },\n      "axes": ["X", "Y", "Z"],\n      "forScanning": true\n    }\n  },\n  "rs232devices": {\n    "ESP32": {\n      "managerName": "ESP32Manager",\n      "managerProperties": {\n        "host_": "192.168.43.129",\n        "serialport": "COM3"\n      }\n    }\n  },\n  "lasers": {\n    "LED": {\n      "managerName": "ESP32LEDLaserManager",\n      "managerProperties": {\n        "rs232device": "ESP32",\n        "channel_index": 1\n      },\n      "wavelength": 635\n    }\n  },\n  "detectors": {\n    "WidefieldCamera": {\n      "managerName": "HikCamManager",\n      "managerProperties": {\n        "isRGB": 1,\n        "hikcam": {\n          "exposure": 0,\n          "gain": 0,\n          "blacklevel": 100,\n          "image_width": 1000,\n          "image_height": 1000\n        }\n      },\n      "forAcquisition": true\n    }\n  },\n  "autofocus": {\n    "camera": "WidefieldCamera",\n    "positioner": "ESP32Stage",\n    "updateFreq": 10,\n    "frameCropx": 780,\n    "frameCropy": 400\n  }\n}\n')),(0,i.kt)("p",null,"This file configures the ESP32 stage, LED control, and the camera for widefield imaging. Ensure the ",(0,i.kt)("inlineCode",{parentName:"p"},"host_")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"serialport")," match your system setup."),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"step-3-running-the-microscope-with-imswitch"},"Step 3: Running the Microscope with ImSwitch"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Launch ImSwitch"),":"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"python -m imswitch\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Select the Configuration"),":\nUpon launch, choose ",(0,i.kt)("strong",{parentName:"p"},'"Virtual Microscope"')," or load your custom configuration file, such as ",(0,i.kt)("inlineCode",{parentName:"p"},"uc2_hik_histo.json"),".")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"Control the System"),":\nUse the ImSwitch GUI to move the motorized stage, control the LED array, and capture images. The interface allows you to automate tasks such as focus stacking and digital phase-contrast imaging."))),(0,i.kt)("h3",{id:"video-tutorial-1"},"Video Tutorial"),(0,i.kt)("p",null,"For a visual guide on how to set up ImSwitch and control the UC2 system, watch the following video:"),(0,i.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/Iw_Bg9aYe1U?si=VQgLP854Hg29dwxW",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:!0}),(0,i.kt)("h2",{id:"further-experiments-coming-soon"},"Further Experiments (coming soon)"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Interact with the REST API of ImSwith to integrate this into your workflow"),(0,i.kt)("li",{parentName:"ul"},"Integration into MicroManager "),(0,i.kt)("li",{parentName:"ul"},"Adding more functions to the Board (Temperature Control, multiple axes, Lasers, etc.)")),(0,i.kt)("h2",{id:"experiment-old"},"Experiment (OLD)"),(0,i.kt)("h3",{id:"microscope-assembly"},"Microscope Assembly:"),(0,i.kt)("p",null,'The assembly process involves combining the different cubes and components to build the finite-corrected microscope. A webcam, Z-stage, 45\xb0 folding mirror, sample mount, and LED array are assembled in an L-shape configuration. These cubes are stacked on top of each other to form a complete microscope setup. Optionally, the LED array can be placed in the same cube as the sample or on a separate layer above the sample, creating a 4-layer "tower" setup.'),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Microscope Assembly Steps",src:o(9266).Z,width:"548",height:"777"}),"\n",(0,i.kt)("em",{parentName:"p"},"Steps involved in assembling the finite-corrected digital microscope.")),(0,i.kt)("p",null,"Once assembled, the microscope's folded beampath achieves a tubelength of approximately 100mm, which is less than the required 160mm according to the RMS standard for finite-corrected objective lenses. As a result, the magnification is slightly reduced. However, this setup provides a practical example of how to build compact and automated microscopes."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Microscope Assembly - Side View",src:o(93047).Z,width:"457",height:"594"}),"\n",(0,i.kt)("em",{parentName:"p"},"Side view of the assembled microscope.")),(0,i.kt)("h3",{id:"instructional-videos"},"Instructional Videos:"),(0,i.kt)("p",null,"Two videos guide users through the assembly process:"),(0,i.kt)("p",null,(0,i.kt)("img",{src:o(15611).Z,width:"728",height:"714"})),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Assembling a standard microscope."),(0,i.kt)("li",{parentName:"ol"},"Assembling a finite-corrected microscope with a webcam.")),(0,i.kt)("h3",{id:"microscope-control"},"Microscope Control:"),(0,i.kt)("p",null,"The motor and the LED array are connected to the openUC2 electronics module. Users can control the hardware components using Web-Serial (Chrome only for now) or the Python interface."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"openUC2 Electronics Module",src:o(96152).Z,width:"1086",height:"748"}),"\n",(0,i.kt)("em",{parentName:"p"},"openUC2 electronics module for controlling the microscope components.")),(0,i.kt)("h3",{id:"web-serial-interface"},"Web-Serial Interface:"),(0,i.kt)("p",null,"For control via the web, a new Web-Serial interface is implemented (experimental) and can be accessed at: https:/youseetoo.github.io/indexWebSerialTest.html."),(0,i.kt)("h3",{id:"getting-a-sharp-image"},"Getting a Sharp Image:"),(0,i.kt)("p",null,"To achieve a sharp image, it is recommended to test the microscope with a nearly transparent sample and the LED illumination turned on. Users can adjust the focus by hand to find the optimal position (~10-15mm from the last lens). Once found, the sample adapter can be placed at that position, roughly aligning the sample with the focus. Fine adjustments to the focus can then be made using the focus adjustment buttons provided."))}h.isMDXComponent=!0},34557:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/BoxContent-f95f0953d0a2732878a28c8b2a294cff.jpg"},49758:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/Electronics_Box_1-3269557009625b76e377f6fd0472e548.png"},38025:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/Electronics_Box_2-9341bc4d5d4567c547984eb6fc597124.png"},10830:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/Electronics_Box_3-bea9ec89eee17abbe668fc3fee9e09db.png"},55415:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/Electronics_Box_4-ffb7e037d9b703c5c64c92602e623266.png"},13295:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/Electronics_Box_5-7eb229e79087ca8dd26492ed044f9d47.png"},50895:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/Photo_Control_Stage-e5e047d14f5c9414eeebad6076999d7c.jpg"},75825:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/Photo_Control_LED-62030da1392533866ad99a6283890bc3.jpg"},96152:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/Electronics-99d1e6aa46882f0b18b0ccb6deae0f48.png"},9266:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/Incubatormicroscpoe-64bed5643081baa345d9a6befd40f4af.png"},93047:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/Incubatormicroscpoe3-b0ed3c61f732c0b097e9caa33ef8442e.png"},15611:(e,t,o)=>{o.d(t,{Z:()=>n});const n=o.p+"assets/images/incubatorrot1-c21b2907eea71eea2d91d0656b9910b8.gif"}}]);