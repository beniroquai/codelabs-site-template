"use strict";(self.webpackChunkuc_2_docs=self.webpackChunkuc_2_docs||[]).push([[7633],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>h});var o=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=o.createContext({}),c=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},p=function(e){var n=c(e.components);return o.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=c(t),h=a,d=m["".concat(l,".").concat(h)]||m[h]||u[h]||i;return t?o.createElement(d,r(r({ref:n},p),{},{components:t})):o.createElement(d,r({ref:n},p))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,r=new Array(i);r[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var c=2;c<i;c++)r[c]=t[c];return o.createElement.apply(null,r)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},18352:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=t(87462),a=(t(67294),t(3905));const i={},r="openUC2 FiveD v3",s={unversionedId:"Investigator/XYZMicroscope/FiveD_v3",id:"Investigator/XYZMicroscope/FiveD_v3",title:"openUC2 FiveD v3",description:"Design Files",source:"@site/docs/02_Investigator/02_XYZMicroscope/FiveD_v3.md",sourceDirName:"02_Investigator/02_XYZMicroscope",slug:"/Investigator/XYZMicroscope/FiveD_v3",permalink:"/docs/Investigator/XYZMicroscope/FiveD_v3",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"openUC2 FiveD v2",permalink:"/docs/Investigator/XYZMicroscope/FiveD_v2"},next:{title:"Histo Scanner Plugin Documentation",permalink:"/docs/Investigator/XYZMicroscope/HistoScan"}},l={},c=[{value:"Design Files",id:"design-files",level:2},{value:"Version 3",id:"version-3",level:2},{value:"Introduction",id:"introduction",level:2},{value:"Software",id:"software",level:2},{value:"Troubleshoot",id:"troubleshoot",level:2},{value:"Connecting the microscope to the browser and controll it",id:"connecting-the-microscope-to-the-browser-and-controll-it",level:2},{value:"Home the XY-axis",id:"home-the-xy-axis",level:3},{value:"Move the Z-axis:",id:"move-the-z-axis",level:3},{value:"Inserting the Modules",id:"inserting-the-modules",level:3},{value:"Safety",id:"safety",level:2}],p={toc:c};function u(e){let{components:n,...i}=e;return(0,a.kt)("wrapper",(0,o.Z)({},p,i,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"openuc2-fived-v3"},"openUC2 FiveD v3"),(0,a.kt)("h2",{id:"design-files"},"Design Files"),(0,a.kt)("p",null,":::warn\n",(0,a.kt)("a",{parentName:"p",href:"https://github.com/openUC2/openUC2_XYZ_Stagescanning_Microscope/"},"https://github.com/openUC2/openUC2_XYZ_Stagescanning_Microscope/"),"\n:::"),(0,a.kt)("h2",{id:"version-3"},"Version 3"),(0,a.kt)("p",null,"This is a novel version of the XYZ microscope that also includes fluorescence imaging. It is not based on the UC2 cubes anymore but featues a monolithic body that is still 3D printed."),(0,a.kt)("p",null,"More information are comming soon!"),(0,a.kt)("h2",{id:"introduction"},"Introduction"),(0,a.kt)("p",null,"A first video explains the basic operation of the device"),(0,a.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/T0cRZOXp5fk?si=dgLqVprYvSsl_5Sr",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,a.kt)("h2",{id:"software"},"Software"),(0,a.kt)("p",null,"The device runs using ImSwitch with the following Configuration. Find the ImSwitch Installer here: ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/openUC2/ImSwitchInstaller/releases/tag/v0.0.2"},"https://github.com/openUC2/ImSwitchInstaller/releases/tag/v0.0.2")," (go to latest release)"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/openUC2/ImSwitchConfig/blob/master/imcontrol_setups/example_uc2_hik_histo_andrew_1-12-24.json"},"Config")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "positioners": {\n    "ESP32Stage": {\n      "managerName": "ESP32StageManager",\n      "managerProperties": {\n        "rs232device": "ESP32",\n        "isEnable": true,\n        "enableauto": false,\n        "stepsizeX": -0.3125,\n        "stepsizeY": -0.3125,\n        "stepsizeZ": 0.3125,\n        "homeSpeedX": 15000,\n        "homeSpeedY": 15000,\n        "homeSpeedZ": 15000,\n        "isDualaxis": true,\n        "homeDirectionX": 1,\n        "backlashXOld": 15,\n        "backlashYOld": 40,\n        "backlashX": 0,\n        "backlashY": 0,\n        "homeEndstoppolarityY": 0,\n        "homeDirectionY": -1,\n        "homeDirectionZ": 0,\n        "homeXenabled": 1,\n        "homeYenabled": 1,\n        "homeZenabled": 0,\n        "initialSpeed": {\n          "X": 15000,\n          "Y": 15000,\n          "Z": 15000\n        }\n      },\n      "axes": [\n        "X",\n        "Y",\n        "Z"\n      ],\n      "forScanning": true,\n      "forPositioning": true\n    }\n  },\n  "rs232devices": {\n    "ESP32": {\n      "managerName": "ESP32Manager",\n      "managerProperties": {\n        "host_": "192.168.43.129",\n        "serialport": "COM5",\n        "baudrate":115200,\n        "debug":1\n      }\n    }\n  },\n  "lasers": {\n    "LED": {\n        "analogChannel": null,\n        "digitalLine": null,\n        "managerName": "ESP32LEDLaserManager",\n        "managerProperties": {\n          "rs232device": "ESP32",\n          "channel_index": 1\n        },\n        "wavelength": 0,\n        "valueRangeMin": 0,\n        "valueRangeMax": 1023\n      },\n      "Laser 488": {\n        "analogChannel": null,\n        "digitalLine": null,\n        "managerName": "ESP32LEDLaserManager",\n        "managerProperties": {\n          "rs232device": "ESP32",\n          "channel_index": 2\n        },\n        "wavelength": 635,\n        "valueRangeMin": 0,\n        "valueRangeMax": 1023\n      },\n      "Laser 635": {\n        "analogChannel": null,\n        "digitalLine": null,\n        "managerName": "ESP32LEDLaserManager",\n        "managerProperties": {\n          "rs232device": "ESP32",\n          "channel_index": 3\n        },\n        "wavelength": 488,\n        "valueRangeMin": 0,\n        "valueRangeMax": 1023\n      }\n\n    },\n  "detectors": {\n    "WidefieldCamera": {\n      "analogChannel": null,\n      "digitalLine": null,\n      "managerName": "HikCamManager",\n      "managerProperties": {\n        "isRGB": 1,\n        "cameraListIndex": 0,\n        "cameraEffPixelsize": 0.2257,\n        "hikcam": {\n          "exposure": 0,\n          "gain": 0,\n          "blacklevel": 100,\n          "image_width": 1000,\n          "image_height": 1000\n        }\n      },\n      "forAcquisition": true,\n      "forFocusLock": true\n    },\n    "Observer": {\n      "analogChannel": null,\n      "digitalLine": null,\n      "managerName": "OpenCVCamManager",\n      "managerProperties": {\n        "cameraListIndex": 1,\n        "cameraListIndexWIN": 0,\n        "isRGB":1,\n        "opencvcam": {\n          "exposure": 10\n        }\n      },\n      "forAcquisition": true\n    }\n  },\n  "autofocus": {\n    "camera": "WidefieldCamera",\n    "positioner": "ESP32Stage",\n    "updateFreq": 10,\n    "frameCropx": 780,\n    "frameCropy": 400,\n    "frameCropw": 500,\n    "frameCroph": 100\n  },\n  "mct": {\n    "monitorIdx": 2,\n    "width": 1080,\n    "height": 1920,\n    "wavelength": 0,\n    "pixelSize": 0,\n    "angleMount": 0,\n    "patternsDirWin": "C:\\\\Users\\\\wanghaoran\\\\Documents\\\\ImSwitchConfig\\\\imcontrol_slm\\\\488\\\\",\n    "patternsDir": "/users/bene/ImSwitchConfig/imcontrol_sim/488"\n  },\n  "PixelCalibration": {},\n  "focusLock": {\n    "camera": "WidefieldCamera",\n    "positioner": "ESP32StageManager",\n    "updateFreq": 4,\n    "frameCropx": 0,\n    "frameCropy": 0,\n    "frameCropw": 0,\n    "frameCroph": 0\n  },\n  "availableWidgets": [\n    "Settings",\n    "View",\n    "Recording",\n    "Image",\n    "Laser",\n    "Positioner",\n    "Autofocus",\n    "MCT",\n    "UC2Config",\n    "ImSwitchServer",\n    "PixelCalibration",\n    "HistoScan",\n    "ROIScan"\n  ],\n  "nonAvailableWidgets": [\n    "STORMRecon",\n    "DPC",\n    "Hypha",\n    "FocusLock",\n    "HistoScan",\n    "FocusLock",\n    "FOVLock"\n  ]\n}\n')),(0,a.kt)("h2",{id:"troubleshoot"},"Troubleshoot"),(0,a.kt)("p",null,"We learn from mistakes. So lets start learning. The system is fully open, meaning, you can adjust and change the vast majority of the parts on your own. The entire system consists of the openUC2 frame / skeleton and the 3D printed housing to shield it from dust and light. By removing all M3 cylindrical screws, you can detach the housing from the inner structure to eventually repair or alter the system."),(0,a.kt)("p",null,"You can find a full description of how to dissassemble the microscope here: ",(0,a.kt)("a",{parentName:"p",href:"https://openuc2.github.io/docs/PRODUCTION/INVESTIGATOR/ProductionXYZMicroscope"},"https://openuc2.github.io/docs/PRODUCTION/INVESTIGATOR/ProductionXYZMicroscope")),(0,a.kt)("h2",{id:"connecting-the-microscope-to-the-browser-and-controll-it"},"Connecting the microscope to the browser and controll it"),(0,a.kt)("p",null,"We encourage you to use the UC2ified ImSwitch software to control the microscope. You can find it in this repository: ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/openUC2/ImSwitch/"},"https://github.com/openUC2/ImSwitch/")),(0,a.kt)("p",null,"However, if you want to quick-start the microscope and see if it works, you can open your browser and use the WEB-Serial interface to interact with the microscope."),(0,a.kt)("p",null,"Go to ",(0,a.kt)("a",{parentName:"p",href:"https://youseetoo.github.io/"},"https://youseetoo.github.io/")," and connect to your board (most right option saying ",(0,a.kt)("strong",{parentName:"p"},"ESP32 DEV-based UC2 standalone board V2"),"). Select the COM Port which is holding the ESP32 and hit the ",(0,a.kt)("em",{parentName:"p"},"LOG")," option, once the dialog opens. The alternative option will help you updating the firmware on the device. An in-depth explanation on how the firmware works can be found ",(0,a.kt)("a",{parentName:"p",href:"https://openuc2.github.io/docs/Electronics/uc2e1"},"here"),"."),(0,a.kt)("p",null,"In general, you need to send ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," strings in order to control the system. The strings relevant for the Z-microscope are:"),(0,a.kt)("h3",{id:"home-the-xy-axis"},"Home the XY-axis"),(0,a.kt)("p",null,"It's important to always home the Motors in order to avoid them from getting stuck in an end position (",(0,a.kt)("strong",{parentName:"p"},"ATTENTION!"),"). The following string will move the motor until the endstop is hit. Afterwards it will release the switch:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{"task":"/home_act", "home": {"steppers": [{"stepperid":1, "timeout": 2000, "speed": 15000, "direction":1, "endposrelease":3000}]}}\n')),(0,a.kt)("p",null,"and"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{"task":"/home_act", "home": {"steppers": [{"stepperid":2, "timeout": 2000, "speed": 15000, "direction":1, "endposrelease":3000}]}}\n')),(0,a.kt)("p",null,"Afterwards the internal position is set to 0. You can check that by entering:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{"task": "/motor_get"}\n')),(0,a.kt)("h3",{id:"move-the-z-axis"},"Move the Z-axis:"),(0,a.kt)("p",null,"The motor (Nema12) with 200 steps/revolution runs with 16 microstepps and offers a leadscrew with 1mm/revolution. Hence, one step corresponds to ",(0,a.kt)("inlineCode",{parentName:"p"},"312.5nm"),". Running the motor can be issued with the following command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'{"task":"/motor_act",\n    "motor":\n    {\n        "steppers": [\n            { "stepperid": 3, "position": 1000, "speed": 15000, "isabs": 3, "isaccel":0}\n        ]\n    }\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"stepperid"),": 3 correpsonds to the Z-axis"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"position"),": steps to go (not physical units!)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"speed"),": steps / minute (do not exceed 20000)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"isabs"),": absolute or relative motion"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"isaccel"),": for now, use only non-accelerated motion!")),(0,a.kt)("h3",{id:"inserting-the-modules"},"Inserting the Modules"),(0,a.kt)("p",null,"This shows how the optics module have to be slided into the FiveD assembly. There is a series of groves, slides and accompanying spring-loaded mechanisms to keep the module in exactly one place. It is mechanically well defined. The way to slide it in is a bit involved, but worth it:"),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(22991).Z,width:"979",height:"1099"}),"\n",(0,a.kt)("em",{parentName:"p"},"one of the positioning spheres (without spring) beaks first")),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(46138).Z,width:"997",height:"1088"}),"\n",(0,a.kt)("em",{parentName:"p"},"immediately after this comes the first spring-loaded ball")),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(15841).Z,width:"1027",height:"1094"}),"\n*Both balls have to pass over this hill on their bhan. But since one of them is spring-loaded, this should work."),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(38130).Z,width:"1265",height:"1154"}),"\n",(0,a.kt)("em",{parentName:"p"},"the second spring ball now plays along")),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(25369).Z,width:"1354",height:"1129"}),"\n",(0,a.kt)("em",{parentName:"p"},"The last two fixed balls find their groove almost immediately before the front ball moves up its ramp to the pins")),(0,a.kt)("p",null,(0,a.kt)("img",{src:t(89116).Z,width:"1435",height:"1133"}),"\n",(0,a.kt)("em",{parentName:"p"},'Final position. All fixed balls in their "pin yokes" and both spring balls press the optics module against them'),"."),(0,a.kt)("h2",{id:"safety"},"Safety"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"in case of shattered glass, make sure you don't cut yourself"),(0,a.kt)("li",{parentName:"ul"},"Make sure you don't hurt yourself"),(0,a.kt)("li",{parentName:"ul"},"The moving parts can potentially hurt your finger"),(0,a.kt)("li",{parentName:"ul"},"The electronics - if used in a wrong way - can harm you"),(0,a.kt)("li",{parentName:"ul"},"edges may be sharp, make sure you don't cut yourself")))}u.isMDXComponent=!0},22991:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/moduleinsert_1-1023180faea92acd963ac0efb2115b93.jpeg"},46138:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/moduleinsert_2-4bf1ff7f9a0d2041dd50eab236403aaf.jpeg"},15841:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/moduleinsert_3-f5fb64080bb50238b9ed1ac40b4bc1ae.jpeg"},38130:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/moduleinsert_4-ecd0eb5ed5357887010dfef14163b4e5.jpeg"},25369:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/moduleinsert_5-893899bed97d67f004bdc79df884b227.jpeg"},89116:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/moduleinsert_6-f7a04761b8de1811d1b54592a80b553b.jpeg"}}]);